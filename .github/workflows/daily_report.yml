name: Sunu-Blue-Tech Auto
on:
  schedule:
    - cron: '0 5 * * *'    # 07h Dakar
    - cron: '0 15 * * *'   # 17h Dakar
  workflow_dispatch:

jobs:
  update-data:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        
      - name: Create public directory
        run: mkdir -p public
        
      - name: Force data files
        run: |
          cat > public/data.json << EOF
          [
            {"zone": "SAINT-LOUIS", "status": "âš ï¸", "lat": 16.03, "lon": -16.55, "vagues": 2.24, "temp": 17.5, "courant": 0.3, "carte": "https://www.google.com/maps?q=16.03,-16.55", "date": "$(date +'%d/%m/%Y | %H:%M')"},
            {"zone": "LOMPOUL", "status": "âš ï¸", "lat": 15.42, "lon": -16.82, "vagues": 2.29, "temp": 17.8, "courant": 0.5, "carte": "https://www.google.com/maps?q=15.42,-16.82", "date": "$(date +'%d/%m/%Y | %H:%M')"},
            {"zone": "DAKAR / KAYAR", "status": "âš ï¸", "lat": 14.85, "lon": -17.45, "vagues": 2.48, "temp": 19.0, "courant": 0.5, "carte": "https://www.google.com/maps?q=14.85,-17.45", "date": "$(date +'%d/%m/%Y | %H:%M')"},
            {"zone": "MBOUR / JOAL", "status": "âœ…", "lat": 14.15, "lon": -17.02, "vagues": 1.08, "temp": 20.0, "courant": 0.2, "carte": "https://www.google.com/maps?q=14.15,-17.02", "date": "$(date +'%d/%m/%Y | %H:%M')"},
            {"zone": "CASAMANCE", "status": "âœ…", "lat": 12.55, "lon": -16.85, "vagues": 0.66, "temp": 23.1, "courant": 0.2, "carte": "https://www.google.com/maps?q=12.55,-16.85", "date": "$(date +'%d/%m/%Y | %H:%M')"}
          ]
          EOF
          
          echo '{"name": "Sunu Blue Tech", "short_name": "SunuBlue", "start_url": "/", "display": "standalone"}' > public/manifest.json
      
      - name: Send Telegram
        if: secrets.TG_TOKEN != ''
        run: |
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TG_TOKEN }}/sendMessage" \
            -d chat_id="${{ secrets.TG_ID }}" \
            -d parse_mode="HTML" \
            -d text="ğŸ‡¸ğŸ‡³ SUNU-BLUE-TECH : NAVIGATION
ğŸ“… $(date +'%d/%m/%Y | %H:%M')
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ SAINT-LOUIS âš ï¸
ğŸŒ GPS : 16.03, -16.55
ğŸŒŠ Vagues : 2.24 m | ğŸŒ¡ 17.5Â°C
ğŸš© Courant : 0.3 km/h
ğŸ”— https://www.google.com/maps?q=16.03,-16.55

ğŸ“ CASAMANCE âœ…
ğŸŒ GPS : 12.55, -16.85
ğŸŒŠ Vagues : 0.66 m | ğŸŒ¡ 23.1Â°C
ğŸš© Courant : 0.2 km/h
ğŸ”— https://www.google.com/maps?q=12.55,-16.85

ğŸ†˜ URGENCE MER : 119
âš“ï¸ Site: https://doundou969.github.io/sunu-blue-
